# 第3回B4輪講課題

## 課題の概要

本課題では, 最小二乗法による線形回帰と主成分分析を行う.

## 課題

### 3-1 線形回帰（多項式回帰）

ここでは, 最小二乗法による線形回帰（多項式回帰）をスクラッチで実装し, csvに保存されたデータに適用する.
※ csvのデータは, 各列がx1, x2, x3 のような表形式データだが, 目的変数はどれを選んでもよい.

a. data1.csv, data2.csv, data3.csvの散布図をプロットしてみよう

    - 画像ファイルとして保存してください.
    - data3.csvは3次元なので注意してください.
    - 目的変数について, data1とdata2はy軸, data3はz軸としてください（慣例的にそうなので）.


b. 多項式回帰を行う関数を実装しよう

    - 最小二乗法（OLS）で回帰係数を推定してください.
    - 次数を引数として受け取る関数として実装すると便利です.


c. データに適用しよう

    - data1.csv, data2.csv, data3.csvに適用してください.
    - 回帰直線or回帰曲線or回帰曲面を, 散布図に重ねた図を画像ファイルとして保存してください。
    - 今回は学習データ・検証データ・テストデータの分割やクロスバリデーションは行わなくても良いです.
    - 次数は主観で決めてもらっても構いません.


d. 正則化を追加しよう

    - b.で作成した関数を改変して, Lasso回帰, Ridge回帰, Elastic Net回帰を行えるようにしてください.
    - 正則化パラメータも引数として受け取る関数として実装すると便利です.


e. 正則化ありとなしの場合を比較しよう

    - 図で比較してもらうとわかりやすいと思います.
    - どの正則化でも良いです.
    - 正則化パラメータは主観で決めてもらっても構いません.


### 3-2 主成分分析

a. 主成分分析を実装しよう

    - 出来る限り可読性, 高速化を意識すると良いでしょう.
        - 冗長な記述はしていませんか.
        - for文は行列演算に置き換えることはできませんか.
        - 余裕があれば, `scipy`の実装にどれだけ近づけたか確認してみても良いでしょう.
            - pythonで実行時間を測定する方法は[こちら](http://st-hakky.hatenablog.com/entry/2018/01/26/214255)
    
    - 一般化された関数を定義すると良いでしょう.
        - N次元の入力に対応できると便利です.


b. データに適用しよう

    - data1.csv, data2.csv, data3.csvに適用してください.
    - 全ての主成分軸を散布図上にプロットした図を画像ファイルとして保存してください.
    
c. 次元圧縮しよう

    - data3.csv（3次元データ）を2次元に圧縮し, 2次元散布図を画像ファイルとして保存してください.
    - data4.csv（多次元データ）について, 累積寄与率90%以上とすると最小何次元まで圧縮できるか調べてください.

## 発表（次週）
- 取り組んだ内容を周りにわかるように説明
- コードの解説
    - 工夫したところ，苦労したところの解決策はぜひ共有しましょう
- 結果の考察，応用先の調査など
- 発表資料はTeamsにアップロードしておくこと


## 注意

- 武田研究室の場合はセットアップで作成した`virtualenv`環境を利用すること
  - アクティベート例：`source ~/workspace3/myvenv/bin/activate`
  - アクティベート後`pip install ...`でライブラリのインストールを行う
- 自分の作業ブランチで課題を行うこと
- プルリクエストを送る前に[REVIEW.md](https://github.com/TakedaLab/B4Lecture/blob/master/REVIEW.md)を参照し直せるところは直すこと
- プルリクエストをおくる際には**画像ファイルも載せること**
- 作業前にリポジトリを最新版に更新すること

```
$ git checkout master
$ git fetch upstream
$ git merge upstresam/master
```